<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sensor Playground — Accelerometer · Gyroscope · Compass · GPS</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --accent:#6ee7b7;
    --muted:#9aa6b2;
    --glass: rgba(255,255,255,0.03);
    --glass-2: rgba(255,255,255,0.02);
    --radius:14px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color: #dff3ee;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#051025 0%, #071728 60%);display:flex;align-items:center;justify-content:center;}
  .app{
    width:min(1100px,96vw);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:18px;
    padding:20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    display:grid;grid-template-columns: 420px 1fr;gap:18px;
  }
  header{grid-column:1/-1;display:flex;align-items:center;gap:12px;}
  header h1{margin:0;font-size:20px;letter-spacing:0.2px}
  .left {
    background:var(--card);
    border-radius:12px;
    padding:14px;
    display:flex;
    flex-direction:column;
    gap:12px;
    min-height:420px;
  }
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  button{background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;color:var(--accent);cursor:pointer;font-weight:600}
  button.secondary{color:var(--muted);background:var(--glass-2)}
  .status{font-size:13px;color:var(--muted);display:flex;flex-direction:column;gap:6px}
  .stat-line{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:10px;background:linear-gradient(180deg, rgba(0,0,0,0.03), rgba(255,255,255,0.01));}
  .canvas-wrap{flex:1;display:flex;align-items:center;justify-content:center;min-height:220px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:10px}
  canvas{border-radius:10px;background:linear-gradient(180deg,#07172a,#041017);box-shadow: inset 0 1px 0 rgba(255,255,255,0.02)}
  .right{
    background:var(--card);
    border-radius:12px;padding:14px;display:flex;flex-direction:column;gap:12px;
  }
  .tile{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));padding:12px;border-radius:10px}
  .readout{display:flex;gap:12px;flex-wrap:wrap}
  .readout .box{flex:1:min(140px,100%);padding:10px;border-radius:8px;background:rgba(255,255,255,0.015)}
  label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
  small{color:var(--muted);font-size:12px}
  footer{grid-column:1/-1;font-size:12px;color:var(--muted);display:flex;justify-content:space-between;align-items:center;padding-top:6px}
  a.link{color:var(--accent);text-decoration:none}
  .compass{
    width:120px;height:120px;border-radius:50%;
    background:radial-gradient(circle at 30% 20%, rgba(255,255,255,0.02), rgba(0,0,0,0.1));
    display:flex;align-items:center;justify-content:center;position:relative;
    margin:auto;
  }
  .needle{
    width:6px;height:48px;background:linear-gradient(180deg, #ff6b6b, #c13b3b);
    position:absolute;transform-origin:50% 80%;border-radius:6px;
  }
  .needle::after{content:"";position:absolute;left:-8px;bottom:-10px;width:22px;height:22px;border-radius:50%;background:#fff2;backdrop-filter: blur(2px)}
  .gps{font-size:13px;color:var(--muted)}
  .hint{font-size:13px;color:#9fb7a8}
  @media (max-width:920px){
    .app{grid-template-columns:1fr; padding:12px}
  }
</style>
</head>
<body>
  <div class="app" role="application" aria-label="Sensor Playground">
    <header>
      <h1>Sensor Playground</h1>
      <small class="hint">Use on your phone for best results. Works in secure contexts (HTTPS or localhost).</small>
    </header>

    <section class="left" aria-labelledby="controls-heading">
      <div class="tile">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <label id="controls-heading">Sensors & Controls</label>
            <small>Start/Stop sensors and request permissions if required.</small>
          </div>
          <div class="controls">
            <button id="startAll">Start All</button>
            <button id="stopAll" class="secondary">Stop</button>
          </div>
        </div>
      </div>

      <div class="tile status">
        <div class="stat-line"><div>Accelerometer</div><div id="acc-status">—</div></div>
        <div class="stat-line"><div>Gyroscope</div><div id="gyro-status">—</div></div>
        <div class="stat-line"><div>Magnetometer / Compass</div><div id="mag-status">—</div></div>
        <div class="stat-line"><div>Geolocation (GPS)</div><div id="geo-status">—</div></div>
      </div>

      <div class="tile">
        <label>Permissions & Tips</label>
        <small>
          On iOS Safari you may be prompted to allow motion access. If sensor values are "not available", try a different browser (Chrome on Android or recent Chromium) or enable sensors in browser settings.
        </small>
        <p style="margin-top:10px">
          <button id="requestPerm">Request Motion Permissions (iOS)</button>
        </p>
      </div>

      <div class="tile canvas-wrap">
        <canvas id="tiltCanvas" width="360" height="360" aria-label="Tilt-controlled ball"></canvas>
      </div>
    </section>

    <aside class="right" aria-labelledby="readouts-heading">
      <div class="tile">
        <label id="readouts-heading">Live readouts</label>
        <div class="readout">
          <div class="box">
            <div style="font-weight:700">Accelerometer</div>
            <div id="acc-x">x: —</div>
            <div id="acc-y">y: —</div>
            <div id="acc-z">z: —</div>
          </div>
          <div class="box">
            <div style="font-weight:700">Gyroscope</div>
            <div id="gyro-x">x: —</div>
            <div id="gyro-y">y: —</div>
            <div id="gyro-z">z: —</div>
          </div>
          <div class="box">
            <div style="font-weight:700">Compass</div>
            <div id="heading">heading: —</div>
            <div style="text-align:center;margin-top:8px">
              <div class="compass" aria-hidden="true"><div id="needle" class="needle"></div></div>
            </div>
          </div>
        </div>
      </div>

      <div class="tile">
        <label>Geolocation</label>
        <div class="gps">
          <div id="lat">lat: —</div>
          <div id="lon">lon: —</div>
          <div id="acc">accuracy: —</div>
          <p style="margin-top:8px"><button id="locBtn">Get current position</button></p>
        </div>
      </div>

      <div class="tile">
        <label>Raw logs</label>
        <small id="log">No events yet.</small>
      </div>
    </aside>

    <footer>
      <div>Tip: Use a mobile device & allow permissions for full functionality.</div>
      <div><a class="link" href="#" id="learnHttps">HTTPS & deployment help</a></div>
    </footer>
  </div>

<script>
/*
  Sensor Playground
  - Uses Generic Sensor API (Accelerometer, Gyroscope, Magnetometer) when available.
  - Falls back to DeviceMotion / DeviceOrientation events where needed.
  - Geolocation via navigator.geolocation
  - Note: Sensors require secure context (HTTPS) except on localhost.
*/
